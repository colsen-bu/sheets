(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1660:(e,t,r)=>{Promise.resolve().then(r.bind(r,1586))},1586:(e,t,r)=>{"use strict";r.d(t,{default:()=>w});var a=r(5155),n=r(2115);let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),s=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,n.forwardRef)((e,t)=>{let{color:r="currentColor",size:a=24,strokeWidth:l=2,absoluteStrokeWidth:o,className:i="",children:d,iconNode:u,...p}=e;return(0,n.createElement)("svg",{ref:t,...c,width:a,height:a,stroke:r,strokeWidth:o?24*Number(l)/Number(a):l,className:s("lucide",i),...p},[...u.map(e=>{let[t,r]=e;return(0,n.createElement)(t,r)}),...Array.isArray(d)?d:[d]])}),i=(e,t)=>{let r=(0,n.forwardRef)((r,a)=>{let{className:c,...i}=r;return(0,n.createElement)(o,{ref:a,iconNode:t,className:s("lucide-".concat(l(e)),c),...i})});return r.displayName="".concat(e),r},d=i("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),u=i("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]),p=i("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),h=i("FileDown",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]),m={6:{rows:2,cols:3},12:{rows:3,cols:4},24:{rows:4,cols:6},48:{rows:6,cols:8},96:{rows:8,cols:12},384:{rows:16,cols:24}},x=e=>{if(!e)return"transparent";let t=Math.abs(e.split("").reduce((e,t)=>t.charCodeAt(0)+((e<<5)-e),0)%360);return"hsla(".concat(t,", 70%, 85%, 0.8)")},w=()=>{let[e,t]=(0,n.useState)(96),[r,l]=(0,n.useState)({}),[s,c]=(0,n.useState)({start:null,current:null}),[o,i]=(0,n.useState)(!1),[w,v]=(0,n.useState)({cellType:"",compound:"",concentration:"",concentrationUnits:""}),[f,b]=(0,n.useState)(new Set),g=(0,n.useRef)(null),[y,j]=(0,n.useState)({}),[N,k]=(0,n.useState)(!1),[C,S]=(0,n.useState)(!1),[M,U]=(0,n.useState)("");(0,n.useEffect)(()=>{{let t=t=>{if(!s.start)return;let{rows:r,cols:a}=m[e];if(t.shiftKey){let e={...s};if(0===s.start.col&&s.current&&s.current.col===a-1)switch(t.key){case"ArrowUp":t.preventDefault(),e.start&&(e.start.row=Math.max(0,s.start.row-1));break;case"ArrowDown":t.preventDefault(),e.current&&(e.current.row=Math.min(r-1,s.current.row+1))}if(0===s.start.row&&s.current&&s.current.row===r-1)switch(t.key){case"ArrowLeft":t.preventDefault(),e.start&&(e.start.col=Math.max(0,s.start.col-1));break;case"ArrowRight":t.preventDefault(),e.current&&(e.current.col=Math.min(a-1,s.current.col+1))}c(e)}};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)}},[s,e]),(0,n.useEffect)(()=>{let e=new Set;Object.values(r).forEach(t=>{t.compound&&t.compound&&e.add(t.compound)}),b(e)},[r]),(0,n.useEffect)(()=>{{let e=localStorage.getItem("savedPlates");e&&j(JSON.parse(e))}},[]);let E=e=>String.fromCharCode(65+e),L=()=>{if(!s.start||!s.current)return[];let e=Math.min(s.start.row,s.current.row),t=Math.max(s.start.row,s.current.row),r=Math.min(s.start.col,s.current.col),a=Math.max(s.start.col,s.current.col),n=[];for(let l=e;l<=t;l++)for(let e=r;e<=a;e++)n.push("".concat(E(l)).concat(e+1));return n},T=(e,t)=>{i(!0),c({start:{row:e,col:t},current:{row:e,col:t}})},A=(e,t)=>{o&&c(r=>({...r,current:{row:e,col:t}}))},O=()=>{i(!1)},R=t=>{let{cols:r}=m[e];c({start:{row:t,col:0},current:{row:t,col:r-1}})},z=t=>{let{rows:r}=m[e];c({start:{row:0,col:t},current:{row:r-1,col:t}})},D=e=>{let r=y[e];r&&(t(r.plateType),l(r.wells),k(!1))};return(0,a.jsxs)("div",{className:"p-6 max-w-6xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-6 space-y-4",children:[(0,a.jsxs)("div",{className:"flex space-x-4",children:[(0,a.jsx)("select",{value:e.toString(),onChange:e=>t(Number(e.target.value)),className:"p-2 border rounded",children:Object.entries(m).map(e=>{let[t]=e;return(0,a.jsxs)("option",{value:t,children:[t,"-well plate"]},t)})}),(0,a.jsxs)("button",{onClick:()=>S(!0),className:"flex items-center px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:[(0,a.jsx)(d,{className:"w-4 h-4 mr-2"})," Save"]}),(0,a.jsxs)("button",{onClick:()=>{localStorage.removeItem("savedPlates"),j({})},className:"flex items-center px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600",children:[(0,a.jsx)(u,{className:"w-4 h-4 mr-2"})," Clear Saved"]}),(0,a.jsxs)("button",{onClick:()=>k(!0),className:"flex items-center px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600",children:[(0,a.jsx)(p,{className:"w-4 h-4 mr-2"})," Load"]}),(0,a.jsxs)("button",{onClick:()=>{let{rows:t,cols:a}=m[e],n="Well,Cell Type,Compound,Concentration,Concentration Units\n";for(let e=0;e<t;e++)for(let t=0;t<a;t++){let a="".concat(E(e)).concat(t+1),l=r[a]||{cellType:"",compound:"",concentration:"",concentrationUnits:""};n+="".concat(a,",").concat(l.cellType,",").concat(l.compound,",").concat(l.concentration,",").concat(l.concentrationUnits,"\n")}{let e=new Blob([n],{type:"text/csv"}),t=window.URL.createObjectURL(e),r=document.createElement("a");r.href=t,r.download="plate_config.csv",r.click(),window.URL.revokeObjectURL(t)}},className:"flex items-center px-4 py-2 bg-purple-500 text-white rounded hover:bg-purple-600",children:[(0,a.jsx)(h,{className:"w-4 h-4 mr-2"})," Export CSV"]})]}),N&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg max-w-md w-full",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Load Plate Configuration"}),0===Object.keys(y).length?(0,a.jsx)("p",{children:"No saved plate configurations found."}):(0,a.jsx)("div",{className:"space-y-2",children:Object.keys(y).map(e=>(0,a.jsx)("button",{onClick:()=>D(e),className:"w-full p-2 border rounded hover:bg-gray-100",children:e},e))}),(0,a.jsx)("button",{onClick:()=>k(!1),className:"mt-4 w-full p-2 bg-gray-200 rounded",children:"Cancel"})]})}),s.start&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("input",{type:"text",placeholder:"Cell Type",value:w.cellType,onChange:e=>v(t=>({...t,cellType:e.target.value})),className:"p-2 border rounded w-full"}),(0,a.jsx)("input",{type:"text",placeholder:"Compound",value:w.compound,onChange:e=>v(t=>({...t,compound:e.target.value})),className:"p-2 border rounded w-full"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("input",{type:"text",placeholder:"Concentration",value:w.concentration,onChange:e=>v(t=>({...t,concentration:e.target.value})),className:"p-2 border rounded w-full"}),(0,a.jsx)("input",{type:"text",placeholder:"Units",value:w.concentrationUnits,onChange:e=>v(t=>({...t,concentrationUnits:e.target.value})),className:"p-2 border rounded w-full"})]}),(0,a.jsx)("button",{onClick:()=>{let e=L(),t={...r};e.forEach(e=>{t[e]={cellType:w.cellType,compound:w.compound,concentration:w.concentration,concentrationUnits:w.concentrationUnits}}),l(t),c({start:null,current:null})},className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 w-full",children:"Update Selected Wells"})]}),f.size>0&&(0,a.jsxs)("div",{className:"mt-4 p-4 border rounded",children:[(0,a.jsx)("h3",{className:"font-bold mb-2",children:"Compound Legend"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:[...f].map(e=>(0,a.jsx)("div",{className:"flex items-center space-x-2 px-2 py-1 rounded",style:{backgroundColor:x(e)},children:e},e))})]})]}),(0,a.jsx)("div",{className:"relative overflow-auto",children:(0,a.jsxs)("div",{ref:g,className:"inline-block",onMouseLeave:O,children:[(0,a.jsx)("div",{className:"absolute top-0 left-0 w-8 h-8 bg-gray-200 hover:bg-gray-300 flex items-center justify-center cursor-pointer z-10",onClick:()=>{let{rows:t,cols:r}=m[e];s.start&&s.current?c({start:null,current:null}):c({start:{row:0,col:0},current:{row:t-1,col:r-1}})},children:"â˜"}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{className:"w-8"})," ",[...Array(m[e].cols)].map((e,t)=>(0,a.jsx)("div",{className:"w-16 h-8 flex items-center justify-center cursor-pointer hover:bg-gray-100",onClick:()=>z(t),children:t+1},t))]}),Array.from({length:m[e].rows}).map((t,n)=>(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{className:"w-8 h-16 flex items-center justify-center cursor-pointer hover:bg-gray-100",onClick:()=>R(n),children:String.fromCharCode(65+n)}),Array.from({length:m[e].cols}).map((e,t)=>{let l="".concat(String.fromCharCode(65+n)).concat(t+1),s=r[l]||{},c=L().includes(l),o=s.compound?x(s.compound):"white";return(0,a.jsxs)("div",{className:"w-16 h-16 border border-gray-300 cursor-pointer relative overflow-hidden",onMouseDown:()=>T(n,t),onMouseMove:()=>A(n,t),onMouseUp:O,children:[(0,a.jsx)("div",{className:"absolute inset-0",style:{backgroundColor:o}}),c&&(0,a.jsx)("div",{className:"absolute inset-0 bg-blue-500 opacity-30"}),(0,a.jsxs)("div",{className:"absolute inset-0 p-1 text-xs overflow-hidden",children:[s.cellType&&(0,a.jsx)("span",{className:"block truncate",children:s.cellType}),s.compound&&(0,a.jsx)("span",{className:"block truncate",children:s.compound}),s.concentration&&(0,a.jsxs)("span",{className:"block truncate",children:[s.concentration," ",s.concentrationUnits]})]})]},"".concat(n,"-").concat(t))})]},n))]})}),C&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg max-w-md w-full",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Save Plate Configuration"}),(0,a.jsx)("input",{type:"text",placeholder:"Plate Name",value:M,onChange:e=>U(e.target.value),className:"p-2 border rounded w-full"}),(0,a.jsx)("button",{onClick:()=>{if(M){let t={...y,[M]:{plateType:e,wells:r}};j(t),localStorage.setItem("savedPlates",JSON.stringify(t)),S(!1),U("")}else S(!0)},className:"mt-4 w-full p-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Save"}),(0,a.jsx)("button",{onClick:()=>S(!1),className:"mt-2 w-full p-2 bg-gray-200 rounded",children:"Cancel"})]})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,517,358],()=>t(1660)),_N_E=e.O()}]);